{% extends 'base.html.twig' %}

{% block title %}Topic{% endblock %}

{% block stylesheets %}
{{ encore_entry_link_tags('topic') }}
{% endblock %}

{% block javascripts %}
{{ encore_entry_script_tags('topic') }}
{% endblock %}

{% block body %}
<h2 class="ui header">Forum</h2>

<h4 class="ui top attached header inverted">
	{{ topic.title }}
</h4>

<div class="ui attached segment">
	<div class="ui grid stackable">
		<div class="segment ui three wide column" style="margin:20px;">
			<div class="content">
				<div class="header">
					<div class="ui fluid image small centered rounded">
						<img src="{{ asset('build/images/square-image.png') }}" alt="Default user picture">
					</div>
				</div>
				<h3 class="center aligned">{{ topic.author.username }}</h3>
			</div>
			<br>
		</div>
		<div class="twelve wide column" style="padding:20px;">			
			<div class="segment">
				{{ topic.message }}
			</div>
			
			<div class="ui divider" style="margin-top:100px;"></div>
			
			<div class="segment">
				Created date : <strong>{{ topic.createdAt|date('H:s, d M Y') }}</strong>
			</div>
		</div>
	</div>
	
	<h3 class="ui header right aligned">
		<button class="ui button" *ngIf="owner()" [routerLink]="['/topics', topic.id, 'edit']">
			<i class="pencil icon" aria-hidden="true"></i>
			Edit
		</button>
		<button class="ui button" *ngIf="is_logged()" [routerLink]="['/topics', topic.id, 'new-post']">
			<i class="reply all icon" aria-hidden="true"></i>
			Reply
		</button>
	</h3>
	
	{% for post in topic.posts %}
	<div class="ui attached segment">
		<div class="ui grid stackable">
			<div class="segment ui three wide column" style="margin:20px;">
				<div class="content">
					<div class="header">
						<div class="ui fluid image small centered rounded">
							<img src="{{ asset('build/images/square-image.png') }}" alt="Default user picture">
						</div>
					</div>
					<h3 class="ui center aligned header">{{ post.author.username }}</h3>
				</div>
			</div>
			<div class="twelve wide column" style="padding:20px;">
				<div class="segment">
					{{ post.message }}
				</div>
				
				<div class="ui divider" style="margin-top:100px;"></div>
				
				<div class="segment">
					Created date : <strong>{{ topic.createdAt|date('H:s, d M Y') }}</strong>
				</div>
			</div>
		</div>
		
		<h3 class="ui header right aligned">
			<button class="ui button" *ngIf="is_logged()" [routerLink]="['/topics', topic.id, 'new-post']">
				<i class="reply all icon" aria-hidden="true"></i>
				Reply
			</button>
		</h3>
	</div>
	{% endfor %}
</div>
{% endblock %}