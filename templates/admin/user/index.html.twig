{% extends 'admin/base.html.twig' %}

{% block title %}Administration{% endblock %}

{% block subbody %}
<a class="ui button" href="{{ path('admin_user_create') }}">
	Create
</a>

<table class="ui basic table stackable striped">
	<thead>
		<tr>
			<th>ID</th>
			<th>Username</th>
			<th>Email</th>
			<th class="center aligned">Role</th>
			<th class="right aligned">Action</th>
		</tr>
	</thead>
	<tbody>
		{% for user in users %}
		<tr>
			<td>{{ user.id }}</td>
			<td>{{ user.username }}</td>
			<td>
				{% if is_granted("ROLE_MOD") %}
				{{ user.email }}
				{% endif %}
			</td>
			<td class="center aligned">{{ user.role.name|upper }}</td>
			<td class="right aligned">
				{% if is_granted("ROLE_MOD") %}
				<a href="{{ path('admin_user_edit', {'id': user.id}) }}">
					<em class="pencil alternate icon"></em>
				</a>
				{% endif %}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>

{% if users|length > 10 %}
{{ knp_pagination_render(users) }}
{% endif %}
{% endblock %}
